<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Coffee & Chill â€“ Dein Nachbarschafts-Cafe mit hausgemachtem GebÃ¤ck und gutem Kaffee.">
    <meta name="application-version" content="1.2.0">
    <title>Coffee & Chill â€“ Nachbarschafts-Cafe</title>
    <style>
      :root {
        --bg: #f8f8f8;
        --panel: #ffffff;
        --ink: #1a1a1a;
        --muted: #555;
        --accent: #8b5cf6;
        --line: #e0e0e0;
        --shadow: 0 4px 20px rgba(0, 0, 0, .1);
        --radius: 16px;
        --promo-bg: #ffe08a;
        --promo-ink: #222;
        /* gut sichtbares Gelb */
      }

      :root[data-theme="dark"] {
        --bg: #0f1115;
        --panel: #141821;
        --ink: #e8eaf2;
        --muted: #9aa3af;
        --line: #262c3a;
        --shadow: 0 8px 24px rgba(0, 0, 0, .35);
        --promo-bg: #4b3a00;
        --promo-ink: #ffe08a;
        /* kontrastreich im Dark Mode */
      }

      * {
        box-sizing: border-box
      }

      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
        background: var(--bg);
        color: var(--ink);
        line-height: 1.6
      }

      .wrap {
        max-width: 1100px;
        margin: 0 auto;
        padding: 24px 16px 64px
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 12px 18px;
        border: 1px solid var(--line);
        border-radius: 14px;
        background: var(--panel);
        box-shadow: var(--shadow)
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 12px
      }

      .logo {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        background: var(--panel);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        box-shadow: var(--shadow)
      }

      h1 {
        font-size: clamp(20px, 3vw, 28px);
        margin: 0
      }

      nav a {
        color: var(--ink);
        text-decoration: none;
        padding: 8px 10px;
        border-radius: 10px
      }

      nav a:hover {
        background: #efefef
      }

      /* PROMO-BANNER: auffÃ¤llig, direkt unter dem Header */
      .promo-wrap {
        margin-top: 12px
      }

      #promo-banner {
        display: none;
        /* wird per JS auf block gesetzt */
        background: var(--promo-bg);
        color: var(--promo-ink);
        border: 2px solid #d4b24f;
        border-radius: 12px;
        padding: 14px 16px;
        font-weight: 700;
        box-shadow: 0 6px 18px rgba(0, 0, 0, .12);
      }

      #promo-banner .row {
        display: flex;
        align-items: center;
        gap: 12px
      }

      #promo-banner .msg {
        flex: 1;
        font-size: 18px
      }

      #promo-banner .close {
        border: none;
        background: transparent;
        color: inherit;
        cursor: pointer;
        font-size: 20px;
        line-height: 1;
      }

      #promo-banner .sub {
        font-weight: 500;
        font-size: 13px;
        opacity: .9;
        margin-top: 4px
      }

      .hero {
        display: grid;
        gap: 20px;
        grid-template-columns: 1fr;
        margin: 28px 0
      }

      @media(min-width:900px) {
        .hero {
          grid-template-columns: 1.1fr .9fr
        }
      }

      .panel {
        border: 1px solid var(--line);
        background: var(--panel);
        border-radius: var(--radius);
        padding: 24px;
        box-shadow: var(--shadow)
      }

      .eyebrow {
        letter-spacing: .12em;
        text-transform: uppercase;
        color: var(--muted);
        font-size: 13px
      }

      .title {
        font-size: clamp(26px, 5vw, 42px);
        line-height: 1.15;
        margin: 8px 0 10px
      }

      .lede {
        color: #444
      }

      .grid {
        display: grid;
        gap: 18px;
        grid-template-columns: 1fr
      }

      @media(min-width:900px) {
        .grid {
          grid-template-columns: repeat(3, 1fr)
        }
      }

      .card {
        border: 1px solid var(--line);
        background: var(--panel);
        border-radius: var(--radius);
        padding: 18px;
        box-shadow: var(--shadow)
      }

      .card h3 {
        margin: 0 0 6px;
        font-size: 18px
      }

      .card p {
        margin: 0;
        color: #444
      }

      .list {
        margin: 10px 0 0;
        padding: 0;
        list-style: none
      }

      .list li {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px dashed var(--line)
      }

      .list li:last-child {
        border-bottom: none
      }

      footer {
        margin-top: 30px;
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--muted);
        flex-wrap: wrap
      }

      .footer-spacer {
        flex: 1
      }

      .muted {
        color: var(--muted)
      }

      .ff-label {
        display: flex;
        align-items: center;
        gap: 10px;
        user-select: none
      }

      .toggle {
        position: relative;
        width: 48px;
        height: 24px;
        background: #ccc;
        border-radius: 12px;
        cursor: pointer;
        transition: background .3s
      }

      .toggle::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fff;
        transition: transform .3s;
        box-shadow: 0 2px 4px rgba(0, 0, 0, .2)
      }

      .toggle.active {
        background: var(--accent)
      }

      .toggle.active::after {
        transform: translateX(24px)
      }

      .demo-btn {
        border: 1px solid var(--line);
        background: var(--panel);
        color: var(--ink);
        cursor: pointer;
        font-size: 13px;
        padding: 4px 8px;
        border-radius: 8px
      }

      .demo-btn:hover {
        background: #efefef
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="brand">
          <div class="logo" aria-hidden="true">â˜•</div>
          <div>
            <h1>Coffee & Chill</h1>
            <div class="muted">Nachbarschafts-Cafe in deiner Stadt</div>
          </div>
        </div>
        <nav><a href="#menu">Menu</a><a href="#zeiten">Zeiten</a><a href="#kontakt">Kontakt</a></nav>
      </header>
      <!-- NEU: Promo-Banner (phased) -->
      <div class="promo-wrap">
        <div id="promo-banner" role="region" aria-live="polite" aria-label="Aktion">
          <div class="row">
            <div class="msg">ðŸ“£ <span style="text-decoration:underline">NEU</span>: Haferdrink ohne Aufpreis â€“ nur fÃ¼r kurze Zeit! </div>
            <button class="close" id="promo-close" aria-label="Banner schlieÃŸen">Ã—</button>
          </div>
          <div class="sub" id="promo-diag">Diagnose lÃ¤dt â€¦</div>
        </div>
      </div>
      <section class="hero">
        <div class="panel">
          <div class="eyebrow">Willkommen</div>
          <h2 class="title">Guter Kaffee, hausgemachtes GebÃ¤ck, ruhige AtmosphÃ¤re.</h2>
          <p class="lede">Ob kurzer Stopp auf dem Weg zur Arbeit oder gemÃ¼tliche Pause am Nachmittag â€“ bei uns findest du einfache Klassiker und freundlichen Service.</p>
        </div>
        <aside class="panel">
          <div class="eyebrow">Heute</div>
          <h3 style="margin:8px 0">Empfehlungen</h3>
          <ul class="list">
            <li>
              <span>Flat White</span>
              <span>4.80</span>
            </li>
            <li>
              <span>Zimt-Schnecke</span>
              <span>3.20</span>
            </li>
            <li>
              <span>Filterkaffee</span>
              <span>3.50</span>
            </li>
          </ul>
          <p class="muted" style="margin-top:8px">Preise in CHF. Solange Vorrat reicht.</p>
        </aside>
      </section>
      <section id="menu" class="grid">
        <div class="card">
          <h3>Kaffee & HeissgetrÃ¤nke</h3>
          <ul class="list">
            <li>
              <span>Espresso</span>
              <span>3.20</span>
            </li>
            <li>
              <span>Cappuccino</span>
              <span>4.50</span>
            </li>
            <li>
              <span>Latte</span>
              <span>4.80</span>
            </li>
            <li>
              <span>Heisse Schokolade</span>
              <span>4.20</span>
            </li>
          </ul>
        </div>
        <div class="card">
          <h3>GebÃ¤ck</h3>
          <ul class="list">
            <li>
              <span>Butter-Gipfeli</span>
              <span>2.20</span>
            </li>
            <li>
              <span>Banana Bread</span>
              <span>3.80</span>
            </li>
            <li>
              <span>Brownie</span>
              <span>3.50</span>
            </li>
            <li>
              <span>Granola Becher</span>
              <span>4.20</span>
            </li>
          </ul>
        </div>
        <div class="card">
          <h3>Kaltes</h3>
          <ul class="list">
            <li>
              <span>Eistee Hausgemacht</span>
              <span>3.90</span>
            </li>
            <li>
              <span>Limonade</span>
              <span>3.50</span>
            </li>
            <li>
              <span>Wasser still/sprudel</span>
              <span>2.50</span>
            </li>
          </ul>
        </div>
      </section>
      <section id="zeiten" class="grid" style="margin-top:14px">
        <div class="card">
          <h3>Ã–ffnungszeiten</h3>
          <ul class="list">
            <li>
              <span>Moâ€“Fr</span>
              <span>07:30 â€“ 18:00</span>
            </li>
            <li>
              <span>Sa</span>
              <span>08:00 â€“ 16:00</span>
            </li>
            <li>
              <span>So</span>
              <span>geschlossen</span>
            </li>
          </ul>
        </div>
        <div class="card">
          <h3>Adresse</h3>
          <p>Hauptstrasse 12 <br>8000 ZÃ¼rich </p>
          <p class="muted">Tram und Bus in 2 Gehminuten.</p>
        </div>
        <div id="kontakt" class="card">
          <h3>Kontakt</h3>
          <p>E-Mail: hallo@coffeeandchill.example <br>Telefon: 044 000 00 00 </p>
          <p class="muted">Vorbestellungen gerne telefonisch.</p>
        </div>
      </section>
      <footer>
        <div>Â© <span id="year"></span> Coffee & Chill </div>
        <div class="footer-spacer"></div>
        <!-- Dark Mode Feature Flag -->
        <div class="ff-label">
          <div>Feature: Dark Mode</div>
          <div id="toggle" class="toggle" role="switch" aria-label="Dark Mode umschalten" tabindex="0"></div>
        </div>
        <!-- Demo-Buttons fÃ¼r die PrÃ¤sentation -->
        <button id="btn-show" class="demo-btn">Banner zeigen</button>
        <button id="btn-hide" class="demo-btn">Banner verbergen</button>
        <div class="muted">v1.2.0</div>
      </footer>
    </div>
    <script>
      // Jahr in Footer
      document.getElementById('year').textContent = new Date().getFullYear();
      // Dark Mode Feature Flag (persistiert)
      (function() {
        const KEY = 'ff_dark_enabled';
        const toggle = document.getElementById('toggle');
        const root = document.documentElement;

        function apply(on) {
          root.setAttribute('data-theme', on ? 'dark' : '');
          toggle.classList.toggle('active', on);
          toggle.setAttribute('aria-checked', on ? 'true' : 'false');
        }
        let on = localStorage.getItem(KEY) === '1';
        apply(on);
        const toggleAction = () => {
          on = !on;
          localStorage.setItem(KEY, on ? '1' : '0');
          apply(on);
        };
        toggle.addEventListener('click', toggleAction);
        toggle.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleAction();
          }
        });
      })();
      // Phased Deployment: Promo-Banner (random 30%) + SchlieÃŸen (session-basiert)
      (function() {
        const banner = document.getElementById('promo-banner');
        const diag = document.getElementById('promo-diag');
        const btnClose = document.getElementById('promo-close');
        const btnShow = document.getElementById('btn-show');
        const btnHide = document.getElementById('btn-hide');
        if (!banner) return;
        const KEY_DISMISS = 'promo_dismiss_session'; // sessionStorage (nur aktuelle Sitzung)
        const dismissed = sessionStorage.getItem(KEY_DISMISS) === '1';

        function setVisible(v) {
          banner.style.display = v ? 'block' : 'none';
        }
        // Zufallsentscheidung (nur, wenn nicht dismissed)
        let visible = false;
        let rand = Math.random() * 100; // 0..99.999
        if (!dismissed) {
          visible = rand < 30; // 30 %
        }
        setVisible(visible);
        if (diag) {
          diag.textContent = dismissed ? 'Status: vom Nutzer in dieser Sitzung geschlossen' : `Rollout 30% | Random=${rand.toFixed(1)} â†’ ${visible ? 'SICHTBAR' : 'VERBORGEN'}`;
        }
        console.log('[promo] 30% rollout | rand=%s -> visible=%s | dismissed=%s', rand.toFixed(1), visible, dismissed);
        // SchlieÃŸen-Button (nur Sitzung)
        if (btnClose) {
          btnClose.addEventListener('click', () => {
            sessionStorage.setItem(KEY_DISMISS, '1');
            setVisible(false);
            if (diag) diag.textContent = 'Status: vom Nutzer in dieser Sitzung geschlossen';
          });
        }
        // Demo-Buttons (immer Ã¼berschreiben)
        if (btnShow) btnShow.addEventListener('click', () => {
          setVisible(true);
          if (diag) diag.textContent = 'Demo: Banner manuell eingeblendet';
        });
        if (btnHide) btnHide.addEventListener('click', () => {
          setVisible(false);
          if (diag) diag.textContent = 'Demo: Banner manuell verborgen';
        });
      })();
    </script>
  </body>
</html>
